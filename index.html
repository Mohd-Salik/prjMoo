<!DOCTYPE html>

<head>
    <script src="./resources/javascript/jquery-3.6.2.min.js"></script>
<style>

    @import url('https://fonts.googleapis.com/css2?family=Rubik+Spray+Paint&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap');
    
    body{
        display: flex;
        justify-content: center;
        overflow-y: hidden;
        overflow-x: hidden;
        cursor: url('./resources/images/cursor1.svg'), auto;
    }

    button{
        transform: scale(0.9);
        transition: transform 0.1s ease-in-out;
        cursor: url('./resources/images/cursor.svg'), auto;
    }

    button:hover{
        transform: scale(1);
    }

    #mainScreenDiv{
        display: inline-flex;
        height: 100vh;
        width: 100vw;
        z-index: 0;
    }

    #background{
        position: absolute;
        z-index: -1;
        height: 100vh;
        width: 100vw;
        background-image: url('./resources/images/background.jpeg');
        background-repeat: no-repeat;
        background-size: cover;
    }
  
    #background.dim{
        filter: brightness(20%);
    }
    
    #kitchenBlock{
        position: relative;
        opacity: 0%;
        height: 95vh;
        width: 50vw;
    }

    @keyframes popOutAnim {
        0%{opacity: 0%; transform: scale(0.6);}
        30%{opacity: 100%; transform: scale(1.2);}
        50%{transform: scale(1);}
    }

    @keyframes popOffAnim {
        0%{transform: scale(1);}
        30%{opacity: 100%;  transform: scale(1.2);}
        50%{opacity: 0%;  transform: scale(0.6);}
        80%{transform: scale(0.3);}
    }

    .catalogSection{
        height: 30vh;
        display: grid;
        grid-template-columns: auto auto auto;
        grid-row: 1;
        position: relative;
        z-index: 1;
    }

    .item{
        background-size: contain;
        background-repeat: no-repeat;
        opacity: 80%;
        transition: all .3s ease-in-out;
        position: relative;
    }

    .item:hover{
        opacity: 100%;
    }


    #bread{
        background-position: center;
        backdrop-filter: blur(20px);
        opacity: 30%;
        background-image: url('./resources/protoimages/questionmark.png');
    }


    #cookies{
        background-position: center;
        backdrop-filter: blur(20px);
        opacity: 30%;
        background-image: url('./resources/protoimages/questionmark.png');
    }

    #sandwich{
        background-position: center;
        backdrop-filter: blur(20px);
        opacity: 30%;
        background-image: url('./resources/protoimages/questionmark.png');
    }

    #icecream{
        background-position: center;
        backdrop-filter: blur(20px);
        opacity: 30%;
        background-image: url('./resources/protoimages/questionmark.png');
    }

    #cake{
        background-position: center;
        backdrop-filter: blur(20px);
        opacity: 30%;
        background-image: url('./resources/protoimages/questionmark.png');
    }

    #nachos{
        background-position: center;
        backdrop-filter: blur(20px);
        opacity: 30%;
        background-image: url('./resources/protoimages/questionmark.png');
    }

    #donut{
        background-position: center;
        backdrop-filter: blur(20px);
        opacity: 30%;
        background-image: url('./resources/protoimages/questionmark.png');
    }

    #burger{
        background-position: center;
        backdrop-filter: blur(20px);
        opacity: 30%;
        background-image: url('./resources/protoimages/questionmark.png');
    }

    #pizza{
        background-position: center;
        backdrop-filter: blur(20px);
        opacity: 30%;
        background-image: url('./resources/protoimages/questionmark.png');
    }

    #questionmark{
        background-position: center;
        backdrop-filter: blur(20px);
        background-image: url('./resources/protoimages/questionmark.png');
    }

    #shutterBG{
        height: 100%;
        position: relative;
        top: -100%;
        transition: all .5s ease-in-out;
        z-index: 0;
        background-size: cover;
        background-repeat: no-repeat;
        opacity: 100%;
        border-radius: 20px;
        background-image: url('./resources/protoimages/wallmetal.jpg');
        box-shadow: 5px 10px 8px #000000;
    }
    
    #shutterBG.raise{
        top: 0%;
    }

    #foodPreview{
        height: 100%;
        position: relative;
        top: -100%;
        z-index: -1;
    }
    
    @keyframes foodfallanim {
        0% {bottom: 100%;}
        20% {bottom: 0%;}
        30% {bottom: 10%;}
        40% {bottom: 0%;}
        100% {bottom: 0%;}
    }

    @keyframes returnPosition {
        0%{opacity: 0%}
        20%{opacity: 100%}
        100% {left: 0px; bottom: 0px;}
    }


    .previewSection{
        position: relative;
        background: url('./resources/images/chef.png') 0 0;
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center; 
        height: 65vh;
        z-index: -1;
    }


    .customerBlock{
        height: 95vh;
        width: 50vw; 
    }

    #characterSection{
        background: url('./resources/images/stall_idle.gif') 0 0;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        height: 25vh;
        display: flex;
        justify-content: center;
    }

    #characterSection.dim{
        filter: brightness(20%);
    }

    .TablesGrid{
        height:55vh;
        display: grid;
        grid-template-columns: auto auto auto;
        padding: 10px;
    }

    .Cow{
        /* background-image: url('./resources/images/cow_walk.gif'); */
        position: relative;
        height: 100%;
        width: 100%;
        opacity: 0%;
        background-size: cover;
        background-repeat: no-repeat;
        border-style: none;
        filter: brightness(80%);
        transition: filter 0.2s ease-in-out;
    }

    .Cow:hover{
        filter: brightness(100%);
    }


    .Table{
        position: relative;
        height: 100%;
        top: -30%;
        
        background: url('./resources/images/table.png') 0 0;
        background-size: contain;
        background-repeat: no-repeat;
    }

    #TableSection1.active{
        filter: brightness(100%);
    }

    #TableSection2.active{
        filter: brightness(100%);
    }

    #TableSection3.active{
        filter: brightness(100%);
    }

    #TableSection1.dim{
        filter: brightness(20%);
    }

    #TableSection2.dim{
        filter: brightness(20%);
    }

    #TableSection3.dim{
        filter: brightness(20%);
    }

    #table2.active{
        opacity: 100%;
    }

    #table3.active{
        opacity: 100%;
    }


    .order{
        border-radius: 20px;
        background-color: rgb(255, 255, 255);
    }

    .grid-item{
        transition: all 0.3s ease-in-out;
    }

    .grid-item:hover{
        background-color: rgba(26, 111, 190, 0.164);
    }

    #actionSection{
        height: 10vh;
        display: inline-flex;
        padding-left: 3vw;
        opacity: 0%;
    }

    #resetButton{
        border: 2px solid rgba(0, 0, 0, 0.397);
        border-radius: 50px;
        margin-right: 20px;
        font-size: 30px;
        color: rgb(255, 215, 215);
        font-family: 'Rubik Spray Paint', cursive;
        background-color: rgb(0, 0, 0);
        width: 20vw;
        box-shadow: 5px 10px 8px #000000;
    }

    #serveButton{
        border: 2px solid rgba(0, 0, 0, 0.397);
        border-radius: 50px;
        font-size: 30px;
        color: rgb(56, 56, 1);
        font-family: 'Rubik Spray Paint', cursive;
        background-color: white;
        width: 20vw;
        box-shadow: 5px 10px 8px #000000;
    }

    #orderLine{
        background-color: rgb(255, 255, 255);
        border: 3px solid rgb(0, 0, 0);
        border-radius: 50px;
        font-family: 'Indie Flower', cursive;
        width: fit-content;
        height: fit-content;
        max-width: 100%;
        font-size: 25px;
        padding: 10px;
        position: relative;
        top: 80%;
        text-align: center;
        opacity: 0%;
        box-shadow: 5px 10px 8px #000000;
    }

    @keyframes shake {
        0% { transform: translate(1px, 1px) rotate(0deg); }
        10% { transform: translate(-1px, -2px) rotate(-1deg); }
        20% { transform: translate(-3px, 0px) rotate(1deg); }
        30% { transform: translate(3px, 2px) rotate(0deg); }
        40% { transform: translate(1px, -1px) rotate(1deg); }
        50% { transform: translate(-1px, 2px) rotate(-1deg); }
        60% { transform: translate(-3px, 1px) rotate(0deg); }
        70% { transform: translate(3px, 1px) rotate(-1deg); }
        80% { transform: translate(-1px, -1px) rotate(1deg); }
        90% { transform: translate(1px, 2px) rotate(0deg); }
        100% { transform: translate(1px, -2px) rotate(-1deg); }
    }

    @keyframes moveIn {
        0% {left: 150vw;}
        10% {left: 0vw;}
        90% {left: 0vw;}
        100% {left: -150vw;}
    }

    #animationComplete{
        position: absolute;
        height: 100vh;
        width: 100vw;
        left: 150vw;
    }

    #scanLines{
        animation: shake 0.5s infinite;
        background: url('./resources/images/scanlines.jpg') 0 0;
        background-size: contain;
        background-repeat: no-repeat;
        position: relative;
        bottom: -20vh;
        height: 100%;
        width: 100%;
        z-index: 1;
        box-shadow: 5px 10px 8px #000000;
    }

    #completePun{
        z-index: 2;
        position: absolute;
        font-size: 100px;
        font-family: 'Rubik Spray Paint', cursive;
        color: white;
        text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
        top: 50vh;
        left: 45vw;
        text-align: center;
    }

    #completeCow{
        z-index: 2;
        position: absolute;
        height: 100%;
        width: 50%;
        left: 0px;
    }

    #mooPhone{
        opacity: 0%;
        position: absolute;
        z-index: 2;
        height: 90vh;
        width: 30vw;
        top: 30px;
        left: 50px;
        background: url('./resources/images/moophone_bg.jpg') 0 0;
        border: 2px solid rgb(0, 0, 0);
        background-size: cover;
        background-repeat: no-repeat;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        border-radius: 20px;
        box-shadow: 5px 10px 8px #000000;
    }

    #phoneScreen{
        position: relative;
        height: 90%;
        width: 100%;
        background: url('./resources/images/moopanda_bg.jpg') 0 0;
        background-size: cover;
        background-repeat: no-repeat;
        border-radius: 20px;
    }

    #phoneLogo{
        display: flex;
        flex-direction: column;
        justify-content: center;
        height: 50%;
    }

    #logo{
        position: relative;
        height: 30%;
        width: 100%;
        background: url('./resources/images/moopanda_logo.gif') 0 0;
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
    }

    #name{
        position: relative;
        height: 15%;
        background: url('./resources/images/moopanda_name.gif') 0 0;
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
    }

    #stars{
        display: flex;
        flex-direction: row;
        justify-content: center;
        height: 20%;
    }

    #star1{
        opacity: 20%;
        position: relative;
        width: 40%;
        background: url('./resources/images/star_empty.gif') 0 0;
        background-size: contain;
        background-repeat: no-repeat;   
    }

    #star2{
        opacity: 20%;
        position: relative;
        width: 40%;
        background: url('./resources/images/star_empty.gif') 0 0;
        background-size: contain;
        background-repeat: no-repeat;   
    }

    #star3{
        opacity: 20%;
        position: relative;
        width: 40%;
        background: url('./resources/images/star_empty.gif') 0 0;
        background-size: contain;
        background-repeat: no-repeat;   
    }

    #star4{
        opacity: 20%;
        position: relative;
        width: 40%;
        background: url('./resources/images/star_empty.gif') 0 0;
        background-size: contain;
        background-repeat: no-repeat;   
    }

    #levelTracker{
        height: 10%;
        width: 100%;
        font-size: 25px;
        font-family: 'Indie Flower', cursive;
        text-align: center;
        color: black;
    }

    #notifbarContainer{
        display: flex;
        flex-direction: row;
        justify-content: center;
        height: 5%;
        background-color: aliceblue;
        border-radius: 20px;
    }

    #cell{
        margin-left: 20px;
        position: relative;
        top: 50%;
        height: 80%;
        width: 100%;
        background: url('./resources/images/signal.png') 0 0;
        background-size: contain;
        background-repeat: no-repeat; 
        transform: translateY(-50%);  
    }

    #alarm{
        position: relative;
        top: 50%;
        padding-right: 50%;
        height: 80%;
        width: 100%;
        background: url('./resources/images/alarm.png') 0 0;
        background-size: contain;
        background-repeat: no-repeat;  
        transform: translateY(-50%); 
    }

    #battery{
        position: relative;
        top: 50%;
        height: 80%;
        width: 100%;
        background: url('./resources/images/battery.png') 0 0;
        background-size: contain;
        background-repeat: no-repeat;   
        transform: translateY(-50%);
    }

    #time{
        position: relative;
        top: 60%;
        height: 100%;
        width: 200%;  
        transform: translateY(-50%);
        font-family: 'Indie Flower', cursive;
    }

    #intro{
        position: absolute;
        z-index: 3;
        height: 70vh;
        width: 90vw;
        margin-top: 100px;
        border-radius: 20px;
        background-color: rgb(124, 124, 124);
        display: flex;
        flex-direction: column;
        justify-items: center;
        border: 5px solid rgba(0, 0, 0, 0.397);
        box-shadow: 5px 10px 8px #000000;
    }

    .mainScroll{
        margin-top: 20px;
        max-height: 80%;
        width: 100%;
        background-color: burlywood;
        border-radius: 10px;
        overflow: scroll;
        overflow-x: hidden;
        box-shadow: 5px 10px 8px #0000002f;
    }

    #start{
        position: relative;
        margin-top: 20px;
        width: 100%;
        font-size: 40px;
        padding-left: 10px;
        padding-right: 10px;
        font-family: 'Indie Flower', cursive;
        border-radius: 20px;
        box-shadow: 5px 10px 8px #000000;
    }

    h5{
        margin-bottom: 0px;
        text-align: center;
        margin-top: 0px;
        font-size: 50px;
        padding-left: 50px;
        height: fit-content;
        font-family: 'Indie Flower', cursive; 
    }

    h2{
        text-align: center;
        font-size: 40px;
        padding-left: 20px;
        font-family: 'Indie Flower', cursive; 
    }

    p{
        margin-top: -30px;
        text-align: center;
        font-size: 30px;
        padding-left: 20px;
        font-family: 'Indie Flower', cursive;   
    }
    
</style>
</head>

<body id="bodyID">
    <div id="intro">
        <div class="mainScroll">
            <h5>----- üêÆ FAQ üêÆ -----</h5>
            <h2>HOW DO I PLAY?</h2>
            <p>Click the cows once they're seated üêÑüëÜ and complete their order.<br/>Unlock all Moochelin stars ‚≠ê to obtain all recipes!</p>
            <h2>OTHER PLATFORMS?</h2>
            <p>Only playable on PC Computers atm.<br/>Loadable on mobile, but I don't recommend it.</p>
            <h2>WHY COWS?</h2>
            <p>I love cows!</p>
            <h2>HOW DID YOU MAKE THIS?</h2>
            <p>Pure HTML, CSS  and Javascript.<br/>
            Animation is done in Krita and Moophone is CSS.<br/>
            FUN FACT: Moo phone's time is dynamic.
            </p>
            <h2>HOW LONG DID IT TAKE YOU?</h2>
            <p>An inconsistent week of procrastination.</p>
            <h2>WILL THERE BE A SEQUEL?</h2>
            <p>Maybe? This is a side project.<br/>No plans on proceeding with game dev career.</p>
            <h2>WHATS THE MUSIC?</h2>
            <p>Dancing in the Moonlight - Instrumental (Anton V)</p>
            <h2>YOU VEGAN?</h2>
            <p>No. Again, I'm not going moo moo vegan..</p>
            <h2>----- MOOPANDA v1.1.6 -----</h2>
        </div>
        <button id="start">OKAY..</button>
    </div>
    <div id="background"></div>
    <div id="mooPhone">
        <div id="phoneScreen">
            <div id="notifbarContainer">
                <div id="cell"></div>
                <div id="alarm"></div>
                <div id="battery"></div>
                <div id="time">4:38 AM</div>
            </div>
            <div id="phoneLogo">
                <div id="logo">.</div>
                <div id="name">.</div>
            </div>
            <div id="stars">
                <div id="star1"></div>
                <div id="star2"></div>
                <div id="star3"></div>
                <div id="star4"></div>
            </div>
            <h1 id="levelTracker">Next Moochelin star in:</h1>
        </div>
        
    </div>
    <div id="animationComplete">
        <p id="completePun">AMOOOZING!</p>
        <div id="completeCow"></div>
        <div id="scanLines"></div>
        
    </div>
    <div class="mainScreenDiv" id="mainScreenDiv">
        <div id="kitchenBlock">
            <div class="catalogSection">
                <button class="item" id="bread"></button>
                <button class="item"id="cookies"></button>
                <button class="item" id="sandwich"></button>
                <button class="item"id="icecream"></button>
                <button class="item" id="cake"></button>
                <button class="item"id="nachos"></button>
                <button class="item" id="donut"></button>
                <button class="item"id="burger"></button>
                <button class="item" id="pizza"></button>
            </div>
            <div class="previewSection" id="orderPreview">
                <div class="shutterBG" id="shutterBG"></div>
                <div class="foodPreview" id="foodPreview"></div>
            </div>
        </div>
        <div class="customerBlock">
            <div id="characterSection"><p id="orderLine"></div>
            <div class="TablesGrid">

                <div class="TableSection" id="TableSection1">
                    <button class="Cow" id="Cow1"></button>
                    <div class="Table" id="Table1"></div>
                </div>

                <div class="TableSection" id="TableSection1.5"></div>
                <div class="TableSection" id="TableSection2">
                    <button class="Cow" id="Cow2"></button>
                    <div class="Table" id="Table2"></div>
                </div>

                <div class="TableSection" id="TableSection2.5"></div>
                <div class="TableSection" id="TableSection3">
                    <button class="Cow" id="Cow3"></button>
                    <div class="Table" id="Table3"></div>
                </div>
                
                <div class="TableSection" id="TableSection3.5"></div>
            </div>
            <div id="actionSection">
                <button class="button" id="resetButton">I MOO~'D a MISTAKE!</button>
                <button class="button" id="serveButton">SERVE!</button>
            </div>
        </div>
    </div>
<script>
    
    const kitchenBlock = document.getElementById('kitchenBlock');
    const actionSection = document.getElementById('actionSection');
    const background = document.getElementById('background');
    const orderLine = document.getElementById('orderLine');
    const animationComplete = document.getElementById('animationComplete');
    const completeCowAnim = document.getElementById('completeCow');
    const completePun = document.getElementById('completePun');

    const star1 = document.getElementById('star1');
    const star2 = document.getElementById('star2');
    const star3 = document.getElementById('star3');
    const star4 = document.getElementById('star4');
    const levelTracker = document.getElementById('levelTracker');

    const startgame = document.getElementById('start');
    const intro = document.getElementById('intro');
    
    
    const mooPhone = document.getElementById('mooPhone');
    const time = document.getElementById('time');

    const body = document.getElementById('bodyID');

    const bread = document.getElementById('bread');
    const cookies = document.getElementById('cookies');
    const sandwich = document.getElementById('sandwich');
    const icecream = document.getElementById('icecream');
    const cake = document.getElementById('cake');
    const nachos = document.getElementById('nachos');
    const donut = document.getElementById('donut');
    const burger = document.getElementById('burger');
    const pizza = document.getElementById('pizza');

    const orderPreview = document.getElementById('orderPreview');
    const foodPreview = document.getElementById('foodPreview');
    const shutter = document.getElementById('shutterBG');
    
    const character = document.getElementById('characterSection');

    const CowFirst = document.getElementById('Cow1');
    const CowSecond = document.getElementById('Cow2');
    const CowThird = document.getElementById('Cow3');

    const TableSection1 = document.getElementById('TableSection1');
    const TableSection2 = document.getElementById('TableSection2');
    const TableSection3 = document.getElementById('TableSection3');

    var s_moo = new Audio('./resources/sound/moo.mp3');
    var s_star = new Audio('./resources/sound/star.mp3');
    var s_click = new Audio('./resources/sound/button.mp3');
    var s_spongebob = new Audio('./resources/sound/final.mp3');

    s_spongebob.addEventListener('ended', function() {
        this.currentTime = 0;
        this.play();
    }, false);

    

    //default status of table occupation
    var CowFirstSit = false;
    var CowSecondSit = false;
    var CowThirdSit = false;
    var music = false;

    var TablesAvailability = [0, 0, 0];
    var scoreRange = [0, 3, 3, 4, 4, 5];
    var levelCounter = 1;
    var scoreCounter;
    scoreCounter = scoreRange[0];
    

    const cowCompleteAnimations = ["served1.gif", "served2.gif", "served3.gif"];

    var CurCow = 0;
    var serveButtonStatus = false;

    const serveButton = document.getElementById('serveButton');
    const resetButton = document.getElementById('resetButton');
    const debuggertext = document.getElementById('testtext');

    var orders = [];
    var finalOrder = [];
    var sortedOrder = [];
    var orderPrepared = [];
    var orderComplete = false;
    const maxTimer = 5000; //5 seconds

    mooPhone.style.animation = 'none';
    mooPhone.offsetWidth;
    mooPhone.style.opacity = "100%";
    mooPhone.style.animation = "popOutAnim 0.5s forwards";

    checkScore();

    function checkScore(){
        if (levelCounter < 6){
            levelTracker.textContent = "CUSTOMER TILL MOOCHELIN STAR: " + scoreCounter.toString();
            if (scoreCounter === 0){
                if (levelCounter === 1){
                    scoreCounter = scoreRange[1];
                    levelCounter +=1;
                    levelTracker.textContent = "CUSTOMER TILL MOOCHELIN STAR: " + scoreCounter.toString();
                    bread.style.background = "url('./resources/protoimages/bread.png')";
                    bread.style.backgroundRepeat = "no-repeat";
                    bread.style.backgroundSize = "contain";
                    bread.style.backgroundPosition = "center";
                    bread.style.opacity = "100%";
                    
                    cookies.style.background = "url('./resources/protoimages/cookies.png')";
                    cookies.style.backgroundRepeat = "no-repeat";
                    cookies.style.backgroundSize = "contain";
                    cookies.style.backgroundPosition = "center";
                    cookies.style.opacity = "100%";
                    
                    orders.push("bread");
                    orders.push("cookies");
                }else if (levelCounter === 2){
                    s_star.play();
                    scoreCounter = scoreRange[2];
                    star1.style.background = "url('./resources/images/star_complete.gif') 0 0";
                    star1.style.backgroundRepeat = "no-repeat";
                    star1.style.backgroundSize = "cover";
                    star1.style.opacity = "100%";
                    levelCounter +=1;
                    levelTracker.textContent = "CUSTOMER TILL MOOCHELIN STAR: " + scoreCounter.toString();

                    sandwich.style.background = "url('./resources/protoimages/sandwich.png')";
                    sandwich.style.backgroundRepeat = "no-repeat";
                    sandwich.style.backgroundSize = "contain";
                    sandwich.style.backgroundPosition = "center";
                    sandwich.style.opacity = "100%";
                    
                    icecream.style.background = "url('./resources/protoimages/icecream.png')";
                    icecream.style.backgroundRepeat = "no-repeat";
                    icecream.style.backgroundSize = "contain";
                    icecream.style.backgroundPosition = "center";
                    icecream.style.opacity = "100%";

                    orders.push("sandwich");
                    orders.push("icecream");
                }else if (levelCounter === 3){
                    s_star.play();
                    scoreCounter = scoreRange[3];
                    star2.style.background = "url('./resources/images/star_complete.gif') 0 0";
                    star2.style.backgroundRepeat = "no-repeat";
                    star2.style.backgroundSize = "cover";
                    star2.style.opacity = "100%";
                    levelCounter +=1;
                    levelTracker.textContent = "CUSTOMER TILL MOOCHELIN STAR: " + scoreCounter.toString();

                    cake.style.background = "url('./resources/protoimages/cake.png')";
                    cake.style.backgroundRepeat = "no-repeat";
                    cake.style.backgroundSize = "contain";
                    cake.style.backgroundPosition = "center";
                    cake.style.opacity = "100%";
                    
                    nachos.style.background = "url('./resources/protoimages/nachos.png')";
                    nachos.style.backgroundRepeat = "no-repeat";
                    nachos.style.backgroundSize = "contain";
                    nachos.style.backgroundPosition = "center";
                    nachos.style.opacity = "100%";

                    orders.push("cake");
                    orders.push("nachos");
                }else if (levelCounter === 4){
                    s_star.play();
                    scoreCounter = scoreRange[4];
                    star3.style.background = "url('./resources/images/star_complete.gif') 0 0";
                    star3.style.backgroundRepeat = "no-repeat";
                    star3.style.backgroundSize = "cover";
                    star3.style.opacity = "100%";
                    levelCounter +=1;
                    levelTracker.textContent = "CUSTOMER TILL MOOCHELIN STAR: " + scoreCounter.toString();

                    donut.style.background = "url('./resources/protoimages/donuts.png')";
                    donut.style.backgroundRepeat = "no-repeat";
                    donut.style.backgroundSize = "contain";
                    donut.style.backgroundPosition = "center";
                    donut.style.opacity = "100%";
                    
                    burger.style.background = "url('./resources/protoimages/burger.png')";
                    burger.style.backgroundRepeat = "no-repeat";
                    burger.style.backgroundSize = "contain";
                    burger.style.backgroundPosition = "center";
                    burger.style.opacity = "100%";

                    orders.push("donut");
                    orders.push("burger");
                }else if (levelCounter === 5){
                    s_star.play();
                    scoreCounter = scoreRange[5];
                    star4.style.background = "url('./resources/images/star_complete.gif') 0 0";
                    star4.style.backgroundRepeat = "no-repeat";
                    star4.style.backgroundSize = "cover";
                    star4.style.opacity = "100%";
                    levelCounter +=1;
                    levelTracker.textContent = "Congrats you've unlocked all vegan recipes!";

                    pizza.style.background = "url('./resources/protoimages/pizza.png')";
                    pizza.style.backgroundRepeat = "no-repeat";
                    pizza.style.backgroundSize = "contain";
                    pizza.style.backgroundPosition = "center";
                    pizza.style.opacity = "100%";

                    orders.push("pizza");
                }
            }
        }
    }
    
    

    function findIndexes (array, value) { 
        var idxs = [];
        for (var i = array.length - 1; i >= 0; i--) {
            if (array[i] == value) {
                idxs.push(i);
            }
        }
        return idxs.sort();
    };

    function test(){
        animationComplete.style.animation = null;
        animationComplete.offsetWidth;
        animationComplete.style.animation = "moveIn 2s forwards";
    }

    setInterval(function(){
        var d = new Date();
        var hours = d.getHours(); // => 9
        var minutes = d.getMinutes();
        var ampm = hours >= 12 ? 'pm' : 'am';
        time.textContent = " " + hours.toString() + ": " + minutes.toString() + " " + ampm.toUpperCase();
    }, 1000)

    setInterval(function(){
        var available = findIndexes(TablesAvailability, 0);
        if (available.length === 0){
        }else{
            var table = available[Math.floor(Math.random()*available.length)];
            TablesAvailability[table] = 1;
            spawnTable(table + 1);
        }
    }, 1000);
    
    function randomNumber(min, max) { 
        return Math.random() * (max - min) + min;
    }
    
    function spawnTable(tableNumber){
        var cowHolder;
        if (tableNumber === 1){
            cowHolder = CowFirst;
        } else if (tableNumber === 2){
            cowHolder = CowSecond;
        } else if (tableNumber === 3){
            cowHolder = CowThird;
        }
        cowHolder.style.background = "url('./resources/images/cow_walkv2.gif') 0 0";
        cowHolder.style.backgroundSize = "cover";
        cowHolder.style.backgroundRepeat = "no-repeat";
        cowHolder.style.animation = 'none';
        cowHolder.style.animation = null;
        cowHolder.offsetWidth;
        cowHolder.style.opacity = "100%";
        cowHolder.style.left = "-50vw";
        cowHolder.style.bottom = " "+randomNumber(-40,40)+"vh";
        cowHolder.style.animation = "returnPosition 10s forwards";
        setTimeout(function(){
            cowHolder.style.background = "url('./resources/images/cow_thinkv2.gif') 0 0";
            cowHolder.style.backgroundRepeat = "no-repeat";
            cowHolder.style.backgroundSize = "cover";
            if (tableNumber === 1){
                CowFirstSit = true;
            } else if (tableNumber === 2){
                CowSecondSit = true;
            } else if (tableNumber === 3){
                CowThirdSit = true;
            }
        }, 9500)
    }
    
    function spawn(item) {
        var div = document.createElement("div");
        div.style.position = "absolute";
        div.style.zIndex = 1;
        div.style.bottom = "100%";
        div.style.left = Math.floor(Math.random()*70)+"%";
        div.style.width = "200px";
        div.style.height = "200px";
        div.style.backgroundSize = "contain";
        div.style.backgroundRepeat = "no-repeat";
        div.style.animation = "foodfallanim 1s forwards";  
        orderPrepared.push(item);
        checkOrder();

        if (item === 'bread'){
            div.style.backgroundImage = "url('./resources/protoimages/bread.png')";
            foodPreview.appendChild(div);
        } else if (item === 'cookies'){
            div.style.backgroundImage = "url('./resources/protoimages/cookies.png')";
            foodPreview.appendChild(div);
        }else if (item === 'sandwich'){
            div.style.backgroundImage = "url('./resources/protoimages/sandwich.png')";
            foodPreview.appendChild(div);
        }else if (item === 'icecream'){
            div.style.backgroundImage = "url('./resources/protoimages/icecream.png')";
            foodPreview.appendChild(div);
        }else if (item === 'cake'){
            div.style.backgroundImage = "url('./resources/protoimages/cake.png')";
            foodPreview.appendChild(div);
        }else if (item === 'nachos'){
            div.style.backgroundImage = "url('./resources/protoimages/nachos.png')";
            foodPreview.appendChild(div);
        }else if (item === 'donut'){
            div.style.backgroundImage = "url('./resources/protoimages/donuts.png')";
            foodPreview.appendChild(div);
        }else if (item === 'burger'){
            div.style.backgroundImage = "url('./resources/protoimages/burger.png')";
            foodPreview.appendChild(div);
        }else if (item === 'pizza'){
            div.style.backgroundImage = "url('./resources/protoimages/pizza.png')";
            foodPreview.appendChild(div);
        }
    }


    function createOrder(){
        serveButtonStatus = false;
        serveButton.style.opacity = "20%";
        orderLine.style.opacity = "100%";
        finalOrder = [];
        sortedOrder = [];
        for (let i = 0; i < (levelCounter + 1); i++) {
            if (i === 0){
                finalOrder.push(orders[Math.floor(Math.random()*orders.length)]);
            } else{
                var stat = Math.random();
                if (stat > 0.5){
                    finalOrder.push(orders[Math.floor(Math.random()*orders.length)]);
                }
            }
        }
        orderUpdate();
        
        
        finalOrder.forEach((element) => {sortedOrder.push(element)});
        orderLine.style.opacity = "100%";
    }

    function orderUpdate(){
        var final_string = "";
        for (let i = 0; i < finalOrder.length; i++) {
            final_string += ((i + 1 ) + ".) " + finalOrder[i].toString() + "<br/>");
        }
        orderLine.innerHTML = final_string;
    }

    function checkOrder(){
        if(sortedOrder.sort().join(',') === orderPrepared.sort().join(',')){
            serveButtonStatus = true;
            serveButton.style.opacity = "100%";
            orderLine.textContent = "Yum!";
            orderComplete = true;
        }
        else { 
            console.log("check order"+finalOrder);
            serveButtonStatus = false;
            serveButton.style.opacity = "20%";};
    }

    function serveOrder(){
        shutter.classList.toggle("raise");
        scoreCounter -=1;
        checkScore();
        var cowAnimation = cowCompleteAnimations[Math.floor(Math.random()*cowCompleteAnimations.length)]
        completeCowAnim.style.background = "url('./resources/images/"+cowAnimation+"') 0 0";
        completeCowAnim.style.backgroundRepeat = "no-repeat";
        completeCowAnim.style.backgroundSize = "cover";
        
        animationComplete.style.animation = null;
        animationComplete.offsetWidth;
        animationComplete.style.animation = "moveIn 2s forwards";
        s_moo.play();
        setTimeout(function(){
            while (foodPreview.firstChild) {
                foodPreview.removeChild(foodPreview.lastChild);
            }
            orderPrepared = [];
            shutter.classList.toggle("raise");
            popOffCow();
            popOffKitchen()
            CurCow = 0;
        }, 500);
    }

    function resetOrder(){
        shutter.classList.toggle("raise");
        serveButtonStatus = false;
        serveButton.style.opacity = "20%";
        orderPrepared = [];
        console.log("reset order"+finalOrder);
        orderUpdate();
        setTimeout(function(){
            while (foodPreview.firstChild) {
                foodPreview.removeChild(foodPreview.lastChild);
            }
            shutter.classList.toggle("raise");
        }, 500);
        
    }

    function popOffCow(){
        TablesAvailability[CurCow - 1] = 0;
        if(CurCow === 1){
            CowFirstSit = false;
            CowFirst.style.opacity = "0%";
            TableSection2.classList.toggle("dim");
            TableSection3.classList.toggle("dim");
        }else if(CurCow === 2){
            CowSecondSit = false;
            CowSecond.style.opacity = "0%";
            TableSection1.classList.toggle("dim");
            TableSection3.classList.toggle("dim");
        }else if(CurCow === 3){
            CowThirdSit = false;
            CowThird.style.opacity = "0%";
            TableSection1.classList.toggle("dim");
            TableSection2.classList.toggle("dim");
        }
    }

    function popOffKitchen(){
        background.classList.toggle("dim");
        kitchenBlock.style.animation = 'none';
        kitchenBlock.offsetWidth;
        kitchenBlock.style.animation = "popOffAnim 0.5s forwards";
        kitchenBlock.style.opacity = "0%";
        actionSection.style.animation = 'none';
        actionSection.offsetWidth;
        actionSection.style.animation = "popOffAnim 0.5s forwards";
        actionSection.style.opacity = "0%";
        orderLine.style.opacity = "0%";

        setTimeout(function(){
            mooPhone.style.left = "50px";
            mooPhone.style.animation = 'none';
            mooPhone.offsetWidth;
            mooPhone.style.opacity = "100%";
            mooPhone.style.animation = "popOutAnim 0.5s forwards";
        }, 1500)
        
    }

    function popOutKitchen(){
        mooPhone.style.animation = 'none';
        mooPhone.offsetWidth;
        mooPhone.style.animation = "popOffAnim 0.5s forwards";
        mooPhone.style.opacity = "0%";
        mooPhone.style.left = "-500px";

        background.classList.toggle("dim");
        kitchenBlock.style.animation = 'none';
        kitchenBlock.offsetWidth;
        kitchenBlock.style.opacity = "100%";
        kitchenBlock.style.animation = "popOutAnim 0.5s forwards";
        actionSection.style.animation = 'none';
        actionSection.offsetWidth;
        actionSection.style.opacity = "100%";
        actionSection.style.animation = "popOutAnim 0.5s forwards";
        
        
    }


    startgame.addEventListener('click', function(){
        intro.style.top = "150%";
        if (music === false){
            s_spongebob.play();
            music = true;
        }
    });
    
    bread.addEventListener('click', function(){
        if(levelCounter >= 1){s_click.play(); return spawn('bread');}
    });

    cookies.addEventListener('click', function(){
        if(levelCounter >= 1){s_click.play(); return spawn('cookies');}
    });

    sandwich.addEventListener('click', function(){
        if(levelCounter >= 2){s_click.play(); return spawn('sandwich');}
    });

    icecream.addEventListener('click', function(){
        if(levelCounter >= 2){s_click.play(); return spawn('icecream');}
    });

    cake.addEventListener('click', function(){
        if(levelCounter >= 3){s_click.play(); return spawn('cake');}
    });

    nachos.addEventListener('click', function(){
        if(levelCounter >= 3){s_click.play(); return spawn('nachos');}
    });

    donut.addEventListener('click', function(){
        if(levelCounter >= 4){s_click.play(); return spawn('donut');}
    });

    burger.addEventListener('click', function(){
        if(levelCounter >= 4){s_click.play(); return spawn('burger');}
    });

    pizza.addEventListener('click', function(){
        if(levelCounter >= 5){s_click.play(); return spawn('pizza');}
    });

    CowFirst.addEventListener('click', function(){
        if (CurCow === 0){
            if(CowFirstSit === true){
                s_click.play();
                CowFirstSit = false;
                CurCow = 1;
                CowFirst.style.background = "url('./resources/images/cow_orderingv2.gif') 0 0";
                CowFirst.style.backgroundRepeat = "no-repeat";
                CowFirst.style.backgroundSize = "cover";
                TableSection1.classList.toggle("active");
                TableSection2.classList.toggle("dim");
                TableSection3.classList.toggle("dim");
                popOutKitchen();
                createOrder();
            }
        }
    });

    CowSecond.addEventListener('click', function(){
        if (CurCow === 0){
            if(CowSecondSit === true){
                s_click.play();
                CowSecondSit = false;
                CurCow = 2;
                CowSecond.style.background = "url('./resources/images/cow_orderingv2.gif') 0 0";
                CowSecond.style.backgroundRepeat = "no-repeat";
                CowSecond.style.backgroundSize = "cover";
                TableSection1.classList.toggle("dim");
                TableSection2.classList.toggle("active");
                TableSection3.classList.toggle("dim");
                popOutKitchen();
                createOrder();
            }
        }
    });

    CowThird.addEventListener('click', function(){
        if (CurCow === 0){
            if(CowThirdSit === true){
                s_click.play();
                CowThirdSit = false;
                CurCow = 3;
                CowThird.style.background = "url('./resources/images/cow_orderingv2.gif') 0 0";
                CowThird.style.backgroundRepeat = "no-repeat";
                CowThird.style.backgroundSize = "cover";
                TableSection1.classList.toggle("dim");
                TableSection2.classList.toggle("dim");
                TableSection3.classList.toggle("active");
                popOutKitchen();
                createOrder();
            }
        }
    });
   
    serveButton.addEventListener('click', function(){
        if (CurCow === 0){
            console.log("no cows clicked");
        }else{
            if (orderComplete === true && serveButtonStatus === true){
                s_click.play(); return serveOrder();
            } else {s_click.play(); console.log("ORDER IS NOT COMPLETE..")}
        }    
    });

    resetButton.addEventListener('click', function(){
        if (CurCow === 0){
            s_click.play(); console.log("no cows clicked");
        }else{s_click.play(); return resetOrder();}
    });
    

</script>
</body>
